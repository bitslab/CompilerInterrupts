#!/bin/bash

LOG="report.txt"
rm -f $LOG

accuracy_test()
{
  echo "****************************************************************************************************************************"
  echo "****************************************************************************************************************************"
  echo "                                                     Accuracy Report                                                       " 
  echo "****************************************************************************************************************************"
  echo "****************************************************************************************************************************"
  echo ""
  echo "======================================================== WATER-NS =========================================================="
  echo ""
  cd radiosity 
  ./accuracy.sh | tee -a $LOG
  cd -
  cd water-nsquared
  ./accuracy.sh | tee -a $LOG
  cd -
  echo "======================================================== WATER-SP =========================================================="
  cd water-spatial
  ./accuracy.sh | tee -a $LOG
  cd -
  echo "======================================================== OCEAN-CP =========================================================="
  cd ocean/contiguous_partitions
  ./accuracy.sh | tee -a $LOG
  cd -
  echo "======================================================= OCEAN-NCP =========================================================="
  cd ocean/non_contiguous_partitions
  ./accuracy.sh | tee -a $LOG
  cd -
  echo "========================================================= BARNES ===========================================================" 
  cd barnes
  ./accuracy.sh | tee -a $LOG
  cd -
  echo "======================================================== VOLREND ==========================================================="
  cd volrend
  ./accuracy.sh | tee -a $LOG
  cd -

  LOG="report.txt"
  rm -f $LOG
}

run_test()
{
  echo "****************************************************************************************************************************"
  echo "****************************************************************************************************************************"
  echo "                                                    Performance Report                                                     " 
  echo "****************************************************************************************************************************"
  echo "****************************************************************************************************************************"
  echo ""
  echo "======================================================== WATER-NS =========================================================="
  echo ""
  cd radiosity 
  RUNS=$1 ./run.sh | tee -a $LOG
  cd -
  cd water-nsquared
  RUNS=$1 ./run.sh | tee -a $LOG
  cd -
  echo "======================================================== WATER-SP =========================================================="
  cd water-spatial
  RUNS=$1 ./run.sh | tee -a $LOG
  cd -
  echo "======================================================== OCEAN-CP =========================================================="
  cd ocean/contiguous_partitions
  RUNS=$1 ./run.sh | tee -a $LOG
  cd -
  echo "======================================================= OCEAN-NCP =========================================================="
  cd ocean/non_contiguous_partitions
  RUNS=$1 ./run.sh | tee -a $LOG
  cd -
  echo "========================================================= BARNES ===========================================================" 
  cd barnes
  RUNS=$1 ./run.sh | tee -a $LOG
  cd -
  echo "======================================================== VOLREND ==========================================================="
  cd volrend
  RUNS=$1 ./accuracy.sh | tee -a $LOG
  cd -

  LOG="report.txt"
  rm -f $LOG
}

accuracy_test
run_test 25
